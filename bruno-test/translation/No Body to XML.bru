meta {
  name: No Body to XML
  type: http
  seq: 5
}

post {
  url: {{host}}/pig-latin
  body: none
  auth: none
}

headers {
  Content-Type: application/xml
  Accept: application/xml
}

body:json {
  {
    "sentence": "Yellow Submarine"
  }
}

body:text {
  Yellow Submarine
}

body:xml {
  <TranslationRequest>
    <sentence>
      Yellow Submarine
    </sentence>
  </TranslationRequest>
  
}

assert {
  res.status: eq 400
  res.body: startsWith <Map>
}

tests {
  const { xml2js } = require('xml2js');
  
  test("should return correct translation", function() {
    xml2js.parseString(res.getBody(), function (err, result) {
      expect(err).to.be.null;
      expect(result.TranslationResponse.sentence[0]).to.equal('ellowyay ubmarinesay');
    });
  });
}

docs {
  Translate English sentence to Pig Latin
}
